"use strict";(self.webpackChunk_lage_run_docs=self.webpackChunk_lage_run_docs||[]).push([[471],{5680:(e,a,n)=>{n.d(a,{xA:()=>i,yg:()=>g});var t=n(6540);function s(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function p(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){s(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,s=function(e,a){if(null==e)return{};var n,t,s={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var o=t.createContext({}),y=function(e){var a=t.useContext(o),n=a;return e&&(n="function"==typeof e?e(a):p(p({},a),e)),n},i=function(e){var a=y(e.components);return t.createElement(o.Provider,{value:a},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var n=e.components,s=e.mdxType,r=e.originalType,o=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),d=y(n),c=s,g=d["".concat(o,".").concat(c)]||d[c]||m[c]||r;return n?t.createElement(g,p(p({ref:a},i),{},{components:n})):t.createElement(g,p({ref:a},i))}));function g(e,a){var n=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=n.length,p=new Array(r);p[0]=c;var l={};for(var o in a)hasOwnProperty.call(a,o)&&(l[o]=a[o]);l.originalType=e,l[d]="string"==typeof e?e:s,p[1]=l;for(var y=2;y<r;y++)p[y]=n[y];return t.createElement.apply(null,p)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6491:(e,a,n)=>{n.d(a,{E:()=>s});var t=n(6540);const s=e=>{const{children:a}=e;return t.createElement("span",{className:"inline-block px-3 py-1 text-xs font-semibold leading-tight text-gray-800 bg-gray-200 rounded-full mb-8"},a)}},1443:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>y,contentTitle:()=>l,default:()=>c,frontMatter:()=>p,metadata:()=>o,toc:()=>i});var t=n(8168),s=(n(6540),n(5680)),r=n(6491);const p={title:"Make ESLint Fast",tags:["version 2"]},l=void 0,o={unversionedId:"Cookbook/make-lint-fast",id:"Cookbook/make-lint-fast",title:"Make ESLint Fast",description:"version 2",source:"@site/docs/Cookbook/make-lint-fast.mdx",sourceDirName:"Cookbook",slug:"/Cookbook/make-lint-fast",permalink:"/lage/docs/Cookbook/make-lint-fast",draft:!1,editUrl:"https://github.com/microsoft/lage/edit/master/docs/docs/Cookbook/make-lint-fast.mdx",tags:[{label:"version 2",permalink:"/lage/docs/tags/version-2"}],version:"current",frontMatter:{title:"Make ESLint Fast",tags:["version 2"]},sidebar:"defaultSidebar",previous:{title:"Make Jest Fast",permalink:"/lage/docs/Cookbook/make-jest-fast"},next:{title:"Make TypeScript Fast",permalink:"/lage/docs/Cookbook/make-ts-fast"}},y={},i=[{value:"Worker Runner",id:"worker-runner",level:2},{value:"Let&#39;s see some code!",id:"lets-see-some-code",level:2}],d={toc:i},m="wrapper";function c(e){let{components:a,...n}=e;return(0,s.yg)(m,(0,t.A)({},d,n,{components:a,mdxType:"MDXLayout"}),(0,s.yg)(r.E,{mdxType:"Badge"},"version 2"),(0,s.yg)("p",null,"ESLint is a wonderful piece of software that catches many software bugs and code quality issues before you check them into the shared codebase in a repository. It comes at the price of speed: ESLint is a single-threaded application that can be difficult to speed up."),(0,s.yg)("p",null,"There are several approaches to solving the limitation of the single core issues. One can conceivably create several ESLint processes with different segments or shards of the files to be linted. This could work, but since the division or segmentation changes depending on the number of files at different points in time, it makes the other methods of acceleration difficult to achieve: remote caching, scoping, and pipelining."),(0,s.yg)("p",null,"To combat this, a typical task runner spawns a new ESLint process ",(0,s.yg)("strong",{parentName:"p"},"per package"),". With a sufficiently high number of CPU cores, one can recover the inefficiency of creating new ESLint processes by amortization through parallelization. This, however, has its drawbacks as well! If there happens to be a set of very slow-booting plugins for ESLint, then this bootstrap cost becomes the dominant perf bottleneck."),(0,s.yg)("p",null,"How can we have the cake and eat it too? Easy! Use dedicated workers!"),(0,s.yg)("h2",{id:"worker-runner"},"Worker Runner"),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"lage")," solves this with dedicated workers. The idea is simple: if all of the packages in your monorepo use the same ESLint configuration, then you can save the bootstrap time by creating a ",(0,s.yg)("em",{parentName:"p"},"pool")," of ESLint instances (say, one per CPU core minus one). And have ",(0,s.yg)("inlineCode",{parentName:"p"},"lage")," feed it files to lint per package. ",(0,s.yg)("inlineCode",{parentName:"p"},"lage")," scheduler feeds these to the worker if work is ",(0,s.yg)("em",{parentName:"p"},"needed"),". Caching, scoping, and pipeline all continue to work the same way!"),(0,s.yg)("h2",{id:"lets-see-some-code"},"Let's see some code!"),(0,s.yg)("p",null,"First, let's change our ",(0,s.yg)("inlineCode",{parentName:"p"},"lint")," task configuration in the pipeline to a ",(0,s.yg)("inlineCode",{parentName:"p"},'"worker"')," type:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title twoslash lsp",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"/lage.config.js"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"/lage.config.js"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"js"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"module export=\n(property) export=: {\n    pipeline: {\n        lint: {\n            type: string;\n            options: {\n                worker: string;\n            };\n        };\n    };\n}"},"module")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"module export=\n(property) export=: {\n    pipeline: {\n        lint: {\n            type: string;\n            options: {\n                worker: string;\n            };\n        };\n    };\n}"},"exports")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) pipeline: {\n    lint: {\n        type: string;\n        options: {\n            worker: string;\n        };\n    };\n}"},"pipeline"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) lint: {\n    type: string;\n    options: {\n        worker: string;\n    };\n}"},"lint"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) type: string"},"type"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"worker"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) options: {\n    worker: string;\n}"},"options"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"        "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) worker: string"},"worker"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"scripts/workers/eslint-worker.js"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      }")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    }")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  }")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"};"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki nord with-title twoslash lsp",style:{backgroundColor:"#2e3440ff",color:"#d8dee9ff"},title:"/lage.config.js"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"/lage.config.js"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"js"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"module export=\n(property) export=: {\n    pipeline: {\n        lint: {\n            type: string;\n            options: {\n                worker: string;\n            };\n        };\n    };\n}"},"module")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"module export=\n(property) export=: {\n    pipeline: {\n        lint: {\n            type: string;\n            options: {\n                worker: string;\n            };\n        };\n    };\n}"},"exports")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) pipeline: {\n    lint: {\n        type: string;\n        options: {\n            worker: string;\n        };\n    };\n}"},"pipeline")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) lint: {\n    type: string;\n    options: {\n        worker: string;\n    };\n}"},"lint")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) type: string"},"type")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"worker"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) options: {\n    worker: string;\n}"},"options")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"        "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) worker: string"},"worker")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"scripts/workers/eslint-worker.js"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")))))),(0,s.yg)("p",null,"Then, we implement an ",(0,s.yg)("inlineCode",{parentName:"p"},"eslint-worker.js")," such as this:"),(0,s.yg)("div",{className:"shiki-twoslash-fragment"},(0,s.yg)("pre",{parentName:"div",className:"shiki light-plus with-title twoslash lsp",style:{backgroundColor:"#FFFFFF",color:"#000000"},title:"/scripts/workers/eslint-worker.js"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"/scripts/workers/eslint-worker.js"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"js"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"path"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," { "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) class ESLint\n(alias) namespace ESLint\nimport ESLint"},"ESLint")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," } = "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"eslint"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," { "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import readFile"},"readFile")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," } = "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"fs/promises"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/** this is the workspace root - find it however you want! */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const PROJECT_ROOT: any"},"PROJECT_ROOT")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"resolve")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"__dirname")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"../.."'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/** "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"@type"),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},"{ESLint}"),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}}," */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"let"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"null"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/** caches an ESLint instance for the worker */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"function"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function getEslintInstance(): ESLint"},"getEslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"() {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," (!"),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},") {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const baseConfig: any"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"join")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const PROJECT_ROOT: any"},"PROJECT_ROOT")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"scripts/config/eslintrc.js"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    ));")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const baseConfig: any"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"parserOptions")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"project")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"join")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"cwd")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},", "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"tsconfig.json"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"new"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) new ESLint(options?: ESLint.Options | undefined): ESLint\nimport ESLint"},"ESLint")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"({")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.reportUnusedDisableDirectives?: Linter.StringSeverity | undefined"},"reportUnusedDisableDirectives"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"error"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.baseConfig?: Linter.Config<Linter.RulesRecord, Linter.RulesRecord> | undefined"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.fix?: boolean | ((message: Linter.LintMessage) => boolean) | undefined"},"fix"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"false"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.cache?: boolean | undefined"},"cache"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"false"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.cwd?: string | undefined"},"cwd"),":"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"cwd"))),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    });")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  }")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"return"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"/** Workers should have a run function that gets called per package task */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"async"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"function"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function run(data: any): Promise<void>"},"run")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) data: any"},"data")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},") {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," { "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const target: any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," } = "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) data: any"},"data")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function getEslintInstance(): ESLint"},"getEslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"();")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},'// You can also use "options" to pass different files pattern to lint')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// e.g. data.options.files; you'll need to then configure this inside")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// lage.config.js's pipeline")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:'const files: "src/**/*.ts"'},"files")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"src/**/*.ts"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"await"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.lintFiles(patterns: string | string[]): Promise<ESLint.LintResult[]>"},"lintFiles")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:'const files: "src/**/*.ts"'},"files")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const formatter: ESLint.Formatter"},"formatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"await"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.loadFormatter(nameOrPath?: string | undefined): Promise<ESLint.Formatter>"},"loadFormatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"stylish"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0070C1"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const resultText: string | Promise<string>"},"resultText")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const formatter: ESLint.Formatter"},"formatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.Formatter.format(results: ESLint.LintResult[], data?: ESLint.LintResultData | undefined): string | Promise<string>"},"format")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// Output results to stdout")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"process")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"stdout")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"write")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const resultText: string | Promise<string>"},"resultText")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," + "),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#EE0000"}},"\\n"),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," ("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#795E26"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) Array<ESLint.LintResult>.some(predicate: (value: ESLint.LintResult, index: number, array: ESLint.LintResult[]) => unknown, thisArg?: any): boolean"},"some")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"(("),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) r: ESLint.LintResult"},"r")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},") "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"=>"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) r: ESLint.LintResult"},"r")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.LintResult.errorCount: number"},"errorCount")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," > "),(0,s.yg)("span",{parentName:"div",style:{color:"#098658"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},")) {")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// throw an error to indicate that this task has failed")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#AF00DB"}},"throw"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#0000FF"}},"new"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"var Error: ErrorConstructor\nnew (message?: string | undefined) => Error"},"Error")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#A31515"}},"`Linting failed with errors`"),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},");")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"  }")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// The module export is picked up by `lage` to run inside a worker, and the")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#008000"}},"// module's state is preserved from target run to target run.")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) function export=(data: any): Promise<void>\nimport export="},"module")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#267F99"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) function export=(data: any): Promise<void>\nimport export="},"exports")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}}," = "),(0,s.yg)("span",{parentName:"div",style:{color:"#001080"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function run(data: any): Promise<void>"},"run")),(0,s.yg)("span",{parentName:"div",style:{color:"#000000"}},";"))))),(0,s.yg)("pre",{parentName:"div",className:"shiki nord with-title twoslash lsp",style:{backgroundColor:"#2e3440ff",color:"#d8dee9ff"},title:"/scripts/workers/eslint-worker.js"},(0,s.yg)("div",{parentName:"pre",className:"code-title"},"/scripts/workers/eslint-worker.js"),(0,s.yg)("div",{parentName:"pre",className:"language-id"},"js"),(0,s.yg)("div",{parentName:"pre",className:"code-container"},(0,s.yg)("code",{parentName:"div"},(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"path"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) class ESLint\n(alias) namespace ESLint\nimport ESLint"},"ESLint")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"eslint"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import readFile"},"readFile")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"fs/promises"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"/** this is the workspace root - find it however you want! */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const PROJECT_ROOT: any"},"PROJECT_ROOT")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"resolve")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"__dirname")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},","),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"../.."),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"/** "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"@"),(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},"type"),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{"),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"ESLint"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}}," */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"let"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"null;")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"/** caches an ESLint instance for the worker */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"function"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function getEslintInstance(): ESLint"},"getEslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"()"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," ("),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"!"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},") "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const baseConfig: any"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) require: any"},"require")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"join")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"(")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const PROJECT_ROOT: any"},"PROJECT_ROOT")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"scripts/config/eslintrc.js"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    ))"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const baseConfig: any"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"parserOptions")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"project")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"import path"},"path")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"join")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"cwd")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},","),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"tsconfig.json"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"new"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) new ESLint(options?: ESLint.Options | undefined): ESLint\nimport ESLint"},"ESLint")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.reportUnusedDisableDirectives?: Linter.StringSeverity | undefined"},"reportUnusedDisableDirectives")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"error"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.baseConfig?: Linter.Config<Linter.RulesRecord, Linter.RulesRecord> | undefined"},"baseConfig")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.fix?: boolean | ((message: Linter.LintMessage) => boolean) | undefined"},"fix")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"false"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.cache?: boolean | undefined"},"cache")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"false"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},",")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"      "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.Options.cwd?: string | undefined"},"cwd")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},":"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"cwd"))),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"return"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"let eslintInstance: ESLint"},"eslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"/** Workers should have a run function that gets called per package task */")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"async"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"function"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function run(data: any): Promise<void>"},"run")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) data: any"},"data")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const target: any"},"target")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) data: any"},"data")),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function getEslintInstance(): ESLint"},"getEslintInstance")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"()"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},'// You can also use "options" to pass different files pattern to lint')),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// e.g. data.options.files; you'll need to then configure this inside")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// lage.config.js's pipeline")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:'const files: "src/**/*.ts"'},"files")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"src/**/*.ts"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"await"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.lintFiles(patterns: string | string[]): Promise<ESLint.LintResult[]>"},"lintFiles")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:'const files: "src/**/*.ts"'},"files")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const formatter: ESLint.Formatter"},"formatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"await"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const eslint: ESLint"},"eslint")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.loadFormatter(nameOrPath?: string | undefined): Promise<ESLint.Formatter>"},"loadFormatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"stylish"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"const"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const resultText: string | Promise<string>"},"resultText")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const formatter: ESLint.Formatter"},"formatter")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) ESLint.Formatter.format(results: ESLint.LintResult[], data?: ESLint.LintResultData | undefined): string | Promise<string>"},"format")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// Output results to stdout")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"process")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"stdout")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"any"},"write")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const resultText: string | Promise<string>"},"resultText")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"+"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#EBCB8B"}},"\\n"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},'"'),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"if"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," ("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"const results: ESLint.LintResult[]"},"results")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#88C0D0"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(method) Array<ESLint.LintResult>.some(predicate: (value: ESLint.LintResult, index: number, array: ESLint.LintResult[]) => unknown, thisArg?: any): boolean"},"some")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) r: ESLint.LintResult"},"r")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"=>"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(parameter) r: ESLint.LintResult"},"r")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(property) ESLint.LintResult.errorCount: number"},"errorCount")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},">"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#B48EAD"}},"0"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")) "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"{")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// throw an error to indicate that this task has failed")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"    "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"throw"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"new"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"var Error: ErrorConstructor\nnew (message?: string | undefined) => Error"},"Error")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"("),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"`"),(0,s.yg)("span",{parentName:"div",style:{color:"#A3BE8C"}},"Linting failed with errors"),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"`"),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},")"),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}},"  "),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"}")),(0,s.yg)("div",{parentName:"code",className:"line"},"\xa0"),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// The module export is picked up by `lage` to run inside a worker, and the")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#616E88"}},"// module's state is preserved from target run to target run.")),(0,s.yg)("div",{parentName:"code",className:"line"},(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) function export=(data: any): Promise<void>\nimport export="},"module")),(0,s.yg)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,s.yg)("span",{parentName:"div",style:{color:"#8FBCBB"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"(alias) function export=(data: any): Promise<void>\nimport export="},"exports")),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},"="),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,s.yg)("span",{parentName:"div",style:{color:"#D8DEE9"}},(0,s.yg)("data-lsp",{parentName:"span",lsp:"function run(data: any): Promise<void>"},"run")),(0,s.yg)("span",{parentName:"div",style:{color:"#81A1C1"}},";")))))))}c.isMDXComponent=!0}}]);